# This file is managed by Puppet.
# Any changes you make to this file will be reverted on the next Puppet run.
[sssd]
debug_level = 2
config_file_version = 2
services = nss, pam
domains = <%= @domains %>

[nss]
debug_level = 2
nss_filter_groups = root
nss_filter_users = root
nss_entry_cache_timeout = 30
nss_enum_cache_timeout = 30
override_homedir  = /home/%d/%u
default_shell = /bin/bash
allowed_shells =  /bin/bash,/bin/rbash,/bin/sh

[pam]
debug_level=2
reconnection_retries = 3
offline_credentials_expiration = 2
offline_failed_login_attempts = 3
offline_failed_login_delay = 5

[domain/<%= @smb_realm %>]
debug_level = 5
id_provider = ad
auth_provider = ad
ignore_group_members = true
ldap_sasl_mech = GSSAPI
ldap_sasl_authid = <%= @ldap_sasl_authid %>

#chpass_provider = krb5
#access_provider = simple
#cache_credentials = <%= @cache_credentials %>
#min_id = <%= @real_min_id %>
#entry_cache_timeout = <%= @entry_cache_timeout %>
#krb5_realm = <%= @krb5_realm %>
#krb5_canonicalize = <%= @krb5_canonicalize %>
#ldap_uri = <%= @ldap_uri %>
#ldap_search_base = <%= @ldap_search_base %>
#ldap_user_search_base = <%= @ldap_user_search_base %>
#ldap_group_search_base = <%= @ldap_group_search_base %>
#ldap_netgroup_search_base = <%= @ldap_netgroup_search_base %>
#ldap_referrals = <%= @ldap_referrals %>
#enumerate = <%= @enumerate %>
#ldap_force_upper_case_realm = <%= @ldap_force_upper_case_realm %>
#ldap_schema = <%= @ldap_schema %>
#ldap_default_bind_dn = <%= @ldap_default_bind_dn %>
#ldap_default_authtok_type = <%= @ldap_default_authtok_type %>
#ldap_default_authtok = <%= @ldap_default_authtok %>
#ldap_id_use_start_tls = <%= @ldap_id_use_start_tls %>
#ldap_tls_reqcert = <%= @ldap_tls_reqcert %>
#<% if @ldap_tls_cacert_path -%>
#ldap_tls_cacert = <%= @ldap_tls_cacert_path %>
#<% end -%>
#ldap_user_object_class = <%= @ldap_user_object_class %>
#ldap_user_name = <%= @ldap_user_name %>
#ldap_user_uid_number = <%= @ldap_user_uid_number %>
#ldap_user_gid_number = <%= @ldap_user_gid_number %>
#ldap_user_gecos = <%= @ldap_user_gecos %>
#ldap_user_shell = <%= @ldap_user_shell %>
#ldap_user_home_directory = <%= @ldap_user_home_directory %>
#ldap_user_principal = <%= @ldap_user_principal %>
#ldap_group_object_class = <%= @ldap_group_object_class %>
#ldap_group_name = <%= @ldap_group_name %>
#ldap_group_gid_number = <%= @ldap_group_gid_number %>
#ldap_group_member = <%= @ldap_group_member %>
